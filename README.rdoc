= Double Agent

double_agent is a library for parsing browser and operating system info out of user 
agent strings. It is designed for parsing large sets for review or analysis.

    # Load core, resources and stats
    require 'double_agent'

    # Load pieces individually
    require 'double_agent/core'
    require 'double_agent/resources'
    require 'double_agent/stats'
    require 'double_agent/logs'

    # Load everything at once
    require 'double_agent/all'

= Core

The core parser.

    ua_string = "pretent I'm a user agent string for Firefox 4 on Ubuntu"

    DoubleAgent.browser(ua_string)
    => "Firefox 4"

    DoubleAgent.browser_family(ua_string)
    => "Firefox"

    DoubleAgent.browser_sym(ua_string)
    => :firefox

    DoubleAgent.browser_family_sym(ua_string)
    => :firefox

    DoubleAgent.os(ua_string)
    => "Ubuntu"

    DoubleAgent.os_family(ua_string)
    => "GNU/Linux"

    DoubleAgent.os_sym(ua_string)
    => :ubuntu

    DoubleAgent.os_family_sym(ua_string)
    => :linux

= Resources

Say you're saving a record of each user's login so you can determine their favorite browser. Just make sure
the user agent is avilable through #user_agent, and presto!

    class Login
      include DoubleAgent::Resource

      def user_agent
        #returns this object's user agent string
      end
    end

    login = Login.find(76)

    login.browser
    => "Firefox 4"

    login.os_family
    => "OS X"

= Stats

Figure out what percent use which browser, browser family, os, etc.

== Example 1

    logins = Login.all
    stats = DoubleAgent.percentages_for(logins, :browser)
    stats.each do |browser, percent|
      puts "#{browser} - #{percent}%"
    end

    Firefox 4 - 20%
    Internet Explorer 8 - 18%
    ...

== Example 2

    logins = Login.all
    stats = DoubleAgent.percentages_for(logins, :browser_family, :os_family)
    stats.each do |browser_family, os_family, percent|
      puts "#{browser_family} on #{os_family} - #{percent}%"
    end

    Firefox on Windows - 50%
    Internet Explorer on Window - 20%
    Safari on OS X - 20%
    Firefox on GNU/Linux - 10%

= Logs

DoubleAgent#log_entries parses through Apache and Nginx access logs, instantiating each log line into a LogEntry
object. The LogEntry class mixes in DoubleAgent::Resource, so this is a great way to generate browser and 
OS breakdowns of who's visiting your site.

    require 'double_agent'
    require 'double_agent/logs'

    entries = DoubleAgent.log_entries("/var/log/nginx/my-site.access.log*")
    entries.each do |entry|
      puts entry.browser
    end

    Firefox 3
    Internet Explorer 8
    Internet Explorer 9
    Firefox 4
    Internet Explorer
    Safari
    Chrome
    ...
